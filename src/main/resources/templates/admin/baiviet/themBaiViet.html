<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="admin/layouts/header::header"></head>

<body class="sb-nav-fixed">
  <nav th:replace="admin/layouts/navBar::navBar"></nav>

  <div id="layoutSidenav">
    <div th:replace="admin/layouts/sideBar::sideBar"></div>

    <div id="layoutSidenav_content">
      <main>
        <div class="container-fluid px-4 mt-5">
          <div class="card shadow-sm">
            <div class="card-header d-flex align-items-center justify-content-between">
              <div>
                <i class="fa-solid fa-table me-2"></i>
                <span class="fw-semibold">Danh sách bài viết</span>
              </div>

              <!-- Nếu muốn mở form ngay trên trang thì scroll xuống form -->
              <a class="btn btn-sm btn-primary" href="#formThemBaiViet">
                <i class="fa-solid fa-plus me-1"></i> Thêm bài viết
              </a>
            </div>

            <div class="card-body">
              <!-- ✅ FORM THÊM BÀI VIẾT -->
              <div id="formThemBaiViet" class="mb-4">
                <div class="border rounded-3 p-3 p-lg-4 bg-light">
                  <div class="d-flex align-items-center justify-content-between mb-3">
                    <div>
                      <div class="fw-semibold">Thêm bài viết</div>
                      <div class="text-muted small">Nhập nội dung và đính kèm file nếu cần</div>
                    </div>
                  </div>

                  <form th:action="@{/admin/BaiViet/them}" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="tacGiaId" th:value="${#authentication.principal.nguoiDungId}">

                    <div class="row g-3">
                      <!-- Cột trái -->
                      <div class="col-12 col-lg-8">
                        <div class="mb-3">
                          <label class="form-label fw-semibold">Nhập tên bài viết</label>
                          <input class="form-control" type="text" name="tieuDe" placeholder="VD: Thông báo lịch thi..." required>
                        </div>

                        <div class="mb-3">
                          <label class="form-label fw-semibold">Nhập nội dung</label>
                          <textarea class="form-control" name="noiDung" rows="7" placeholder="Nội dung..." required></textarea>
                          <div class="form-text">Tip: có thể dán HTML nếu m đang render bằng <code>th:utext</code>.</div>
                        </div>

                        <div class="d-flex align-items-center gap-3">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="ghim" id="ghim">
                            <label class="form-check-label" for="ghim">Ghim bài viết</label>
                          </div>
                        </div>
                      </div>

                      <!-- Cột phải -->
                      <div class="col-12 col-lg-4">
                        <div class="mb-3">
                          <label class="form-label fw-semibold">Danh mục</label>
                          <select class="form-select" name="danhMucIds" multiple size="8">
                            <option th:each="dm : ${dsDanhMuc}"
                                    th:value="${dm.danhMucId}"
                                    th:text="${dm.tenDanhMuc}">
                            </option>
                          </select>
                          <div class="form-text">Giữ <b>Ctrl</b> (Windows) hoặc <b>Cmd</b> (Mac) để chọn nhiều.</div>
                        </div>

                        <div class="mb-3">
                          <label class="form-label fw-semibold">Đính kèm (ảnh/video/file)</label>
                          <input type="file" name="files" class="form-control" multiple>
                          <div class="form-text">Có thể chọn nhiều file cùng lúc.</div>
                        </div>

                        <div class="d-grid mt-4">
                          <button type="submit" class="btn btn-primary">
                            <i class="fa-solid fa-floppy-disk me-1"></i> Lưu bài viết
                          </button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>


              <!-- ✅ BẢNG LIST (để sau, cậu add table vào đây) -->
              <div class="table-responsive">
                <!-- table here -->
              </div>
            </div>
          </div>
        </div>
      </main>

      <footer th:replace="admin/layouts/footer::footer"></footer>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <script th:src="@{/assets/js/scripts.js}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
</body>
</html>
