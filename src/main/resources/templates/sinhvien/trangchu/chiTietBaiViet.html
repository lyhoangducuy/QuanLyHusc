<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="sinhvien/layouts/header::header"></head>
<body>
  <!-- Navbar -->
  <nav th:replace="sinhvien/layouts/navBar::navBar"></nav>

  <!-- Content -->
  <main class="container px-4 px-lg-5 my-5">

    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">

        <!-- Card b√†i vi·∫øt -->
        <div class="card border-0 shadow-sm">
          <div class="card-body p-4 p-lg-5">

            <!-- Header -->
            <div th:if="${baiViet != null}">
              <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3">
                <div class="text-muted small">
                  <i class="fa-regular fa-calendar me-1"></i>
                  <span th:text="${baiViet.taoLuc != null ? #temporals.format(baiViet.taoLuc,'dd/MM/yyyy HH:mm') : ''}"></span>
                </div>

                <a class="btn btn-sm btn-outline-secondary"
                   th:href="@{/}">
                  <i class="fa-solid fa-arrow-left me-1"></i> Quay l·∫°i
                </a>
              </div>

              <h1 class="fw-bold mb-3" th:text="${baiViet.tieuDe}">Ti√™u ƒë·ªÅ b√†i vi·∫øt</h1>

              <!-- N·ªôi dung -->
              <div class="fs-6 lh-lg">
                <p class="mb-0" th:utext="${baiViet.noiDung}">N·ªôi dung b√†i vi·∫øt</p>
              </div>

              <!-- ƒê√≠nh k√®m -->
              <div th:if="${baiViet != null and baiViet.dsTep != null}" class="mt-5">
                <div class="d-flex align-items-center justify-content-between mb-3">
                  <h5 class="fw-semibold mb-0">ƒê√≠nh k√®m</h5>
                  <span class="text-muted small">Nh·∫•n ƒë·ªÉ xem</span>
                </div>

                <div class="row g-3">
                  <div class="col-12 col-md-6 col-lg-4" th:each="tep : ${baiViet.dsTep}">

                    <!-- IMAGE -->
                    <a th:if="${tep.loaiTep == 'IMAGE'}"
                       th:href="@{${tep.duongDanUrl}}"
                       target="_blank"
                       class="d-block text-decoration-none">
                      <div class="border rounded-3 overflow-hidden shadow-sm">
                        <img th:src="@{${tep.duongDanUrl}}"
                             class="img-fluid w-100"
                             style="height: 220px; object-fit: cover;"
                             alt="·∫¢nh ƒë√≠nh k√®m"/>
                      </div>
                      <div class="small text-muted mt-2 text-truncate" th:text="${tep.tenTep}"></div>
                    </a>

                    <!-- VIDEO -->
                    <a th:if="${tep.loaiTep == 'VIDEO'}"
                       th:href="@{${tep.duongDanUrl}}"
                       target="_blank"
                       class="d-block text-decoration-none">
                      <div class="border rounded-3 p-3 shadow-sm h-100">
                        <div class="d-flex align-items-center gap-2 mb-2">
                          <span class="badge text-bg-primary">VIDEO</span>
                          <span class="fw-semibold text-truncate" th:text="${tep.tenTep}"></span>
                        </div>
                        <div class="text-muted small mb-3">M·ªü video trong tab m·ªõi</div>
                        <div class="d-grid">
                          <span class="btn btn-outline-primary">
                            üé¨ Xem video
                          </span>
                        </div>
                      </div>
                    </a>

                    <!-- FILE -->
                    <a th:if="${tep.loaiTep == 'FILE'}"
                       th:href="@{${tep.duongDanUrl}}"
                       target="_blank"
                       class="d-block text-decoration-none">
                      <div class="border rounded-3 p-3 shadow-sm h-100">
                        <div class="d-flex align-items-center gap-2 mb-2">
                          <span class="badge text-bg-secondary">FILE</span>
                          <span class="fw-semibold text-truncate" th:text="${tep.tenTep}"></span>
                        </div>
                        <div class="text-muted small mb-3">M·ªü/t·∫£i file trong tab m·ªõi</div>
                        <div class="d-grid">
                          <span class="btn btn-outline-secondary">
                            üìé T·∫£i / M·ªü file
                          </span>
                        </div>
                      </div>
                    </a>

                  </div>
                </div>
              </div>
            </div>

            <!-- tr∆∞·ªùng h·ª£p baiViet null v·∫´n gi·ªØ nguy√™n logic c·ªßa m (kh th√™m) -->
          </div>
        </div>

      </div>
    </div>

  </main>

  <!-- Footer -->
  <footer th:replace="sinhvien/layouts/footer::footer"></footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script th:src="@{/assets/js/sinhvien.js}"></script>
</body>
</html>
